<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>What I Owe Stephanie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.5;
      color: #111827;
      background: #f3f4f6;
    }

    body {
      margin: 0;
      padding: 0;
      display: flex;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
    }

    .app {
      background: #ffffff;
      padding: 1.75rem;
      border-radius: 1.25rem;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
      max-width: 480px;
      width: 100%;
      box-sizing: border-box;
    }

    h1 {
      font-size: 1.5rem;
      margin: 0 0 0.25rem;
      text-align: center;
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #6b7280;
      margin-bottom: 1.5rem;
    }

    .items {
      display: grid;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .card {
      border-radius: 0.9rem;
      padding: 1rem;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      display: grid;
      grid-template-columns: 1fr auto;
      grid-template-rows: auto auto;
      column-gap: 0.75rem;
      row-gap: 0.4rem;
      align-items: center;
    }

    .item-name {
      font-weight: 600;
      font-size: 1rem;
    }

    .count {
      font-size: 1.4rem;
      font-weight: 700;
      justify-self: end;
    }

    .label {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .controls {
      display: flex;
      gap: 0.4rem;
      justify-content: flex-end;
    }

    button {
      border-radius: 999px;
      border: 1px solid #d1d5db;
      padding: 0.25rem 0.7rem;
      background: #ffffff;
      font-size: 0.85rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: background 0.15s ease, transform 0.05s ease, box-shadow 0.15s ease;
    }

    button:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    button:hover {
      background: #f3f4f6;
    }

    button.primary {
      background: #2563eb;
      border-color: #2563eb;
      color: #ffffff;
    }

    button.primary:hover {
      background: #1d4ed8;
    }

    button.danger {
      border-color: #f97373;
      color: #b91c1c;
    }

    .footer {
      border-top: 1px dashed #e5e7eb;
      padding-top: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.85rem;
      color: #4b5563;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .total {
      font-weight: 600;
    }

    .hint {
      font-size: 0.75rem;
      color: #9ca3af;
      text-align: right;
      flex: 1 1 100%;
    }

    @media (max-width: 480px) {
      .app {
        margin: 1rem;
        padding: 1.25rem;
      }
    }
  </style>
</head>
<body>
  <main class="app" aria-label="Tracker for what I owe Stephanie">
    <h1>What I Owe Stephanie</h1>
    <p class="subtitle">Live debt tracker: tacos, cheesecake, and coffee ‚òï</p>

    <section class="items">
      <!-- Tacos -->
      <article class="card" data-item="tacos">
        <div class="item-name">Tacos üåÆ</div>
        <div class="count" id="count-tacos">0</div>
        <div class="label">How many tacos I owe</div>
        <div class="controls" aria-label="Taco controls">
          <button type="button" data-action="decrement" aria-label="Owe one less taco">-1</button>
          <button type="button" data-action="increment" class="primary" aria-label="Owe one more taco">+1</button>
          <button type="button" data-action="reset" class="danger" aria-label="Reset tacos to zero">reset</button>
        </div>
      </article>

      <!-- Cheesecake -->
      <article class="card" data-item="cheesecake">
        <div class="item-name">Cheesecake üç∞</div>
        <div class="count" id="count-cheesecake">0</div>
        <div class="label">How many slices I owe</div>
        <div class="controls" aria-label="Cheesecake controls">
          <button type="button" data-action="decrement" aria-label="Owe one less cheesecake slice">-1</button>
          <button type="button" data-action="increment" class="primary" aria-label="Owe one more cheesecake slice">+1</button>
          <button type="button" data-action="reset" class="danger" aria-label="Reset cheesecake to zero">reset</button>
        </div>
      </article>

      <!-- Coffee -->
      <article class="card" data-item="coffee">
        <div class="item-name">Coffee ‚òï</div>
        <div class="count" id="count-coffee">0</div>
        <div class="label">How many coffees I owe</div>
        <div class="controls" aria-label="Coffee controls">
          <button type="button" data-action="decrement" aria-label="Owe one less coffee">-1</button>
          <button type="button" data-action="increment" class="primary" aria-label="Owe one more coffee">+1</button>
          <button type="button" data-action="reset" class="danger" aria-label="Reset coffee to zero">reset</button>
        </div>
      </article>
    </section>

    <section class="footer">
      <div class="total" id="total-display">
        Total items owed: 0
      </div>
      <button type="button" id="reset-all-btn">
        Reset all to zero
      </button>
      <p class="hint">
        Values are saved in this browser, so you won't lose track (no matter how much she racks up).
      </p>
    </section>
  </main>

  <script>
    (function () {
      const STORAGE_KEY = "steph_debts";
      const defaultDebts = {
        tacos: 0,
        cheesecake: 0,
        coffee: 0
      };

      function loadDebts() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if (!raw) return { ...defaultDebts };
          const parsed = JSON.parse(raw);
          return { ...defaultDebts, ...parsed };
        } catch (e) {
          console.warn("Could not load from localStorage, using defaults.", e);
          return { ...defaultDebts };
        }
      }

      function saveDebts(debts) {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(debts));
        } catch (e) {
          console.warn("Could not save to localStorage.", e);
        }
      }

      const debts = loadDebts();

      const elements = {
        tacos: document.getElementById("count-tacos"),
        cheesecake: document.getElementById("count-cheesecake"),
        coffee: document.getElementById("count-coffee"),
        total: document.getElementById("total-display"),
        resetAllBtn: document.getElementById("reset-all-btn")
      };

      function render() {
        elements.tacos.textContent = debts.tacos;
        elements.cheesecake.textContent = debts.cheesecake;
        elements.coffee.textContent = debts.coffee;

        const total = debts.tacos + debts.cheesecake + debts.coffee;
        elements.total.textContent = `Total items owed: ${total}`;
      }

      function updateItem(item, delta) {
        debts[item] = Math.max(0, (debts[item] || 0) + delta);
        saveDebts(debts);
        render();
      }

      function resetItem(item) {
        debts[item] = 0;
        saveDebts(debts);
        render();
      }

      function resetAll() {
        Object.keys(defaultDebts).forEach((k) => debts[k] = 0);
        saveDebts(debts);
        render();
      }

      // Attach button listeners (event delegation)
      document.querySelectorAll(".card").forEach(card => {
        const item = card.getAttribute("data-item");
        card.addEventListener("click", (event) => {
          const btn = event.target.closest("button[data-action]");
          if (!btn) return;
          const action
